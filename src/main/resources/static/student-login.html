<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>学生登录</title>
  <style>
    :root{--bg:#0f172a;--bg2:#111827;--card-bg:#0b1222;--text:#e5e7eb;--muted:#9ca3af;--primary:#3b82f6;--primary-hover:#2563eb;--border:#1f2a44;--shadow:rgba(17,24,39,.35)}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,Segoe UI,Arial;color:var(--text);background:radial-gradient(1200px 600px at 20% -50%, #1e293b 0%, transparent 45%) no-repeat, linear-gradient(180deg, var(--bg) 0%, var(--bg2) 100%);min-height:100vh;padding-top:64px}
    .topbar{position:fixed;top:0;left:0;right:0;height:64px;display:flex;align-items:center;justify-content:space-between;padding:0 20px;background:rgba(9,12,20,.75);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
    .brand{font-weight:600;letter-spacing:.5px}
    .container{width:min(700px,92%);margin:40px auto}
    .card{background:var(--card-bg);border:1px solid var(--border);border-radius:14px;padding:18px;box-shadow:0 10px 30px var(--shadow)}
    label{display:block;margin:10px 0 6px 0;color:var(--muted)}
    input{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:#0a1020;color:var(--text);outline:none}
    .btn{display:inline-flex;align-items:center;gap:8px;background:var(--primary);color:#fff;border:none;border-radius:10px;padding:10px 14px;cursor:pointer;transition:.2s ease;box-shadow:0 6px 16px rgba(59,130,246,.25)}
    .btn:hover{background:var(--primary-hover)}
    .muted{color:var(--muted);font-size:12px}
    a{color:var(--text);text-decoration:none;opacity:.9} a:hover{opacity:1}
    .toast-wrap{position:fixed;right:16px;bottom:16px;display:flex;flex-direction:column;gap:8px;z-index:1000}
    .toast{background:#0a1020;border:1px solid var(--border);color:var(--text);padding:10px 12px;border-radius:10px;box-shadow:0 6px 16px var(--shadow);min-width:220px;opacity:.98}
    .toast.error{border-color:#ef4444}
  </style>
</head>
<body>
  <div class="topbar">
    <div class="brand">寒衣补助 · 学生登录</div>
    <div><a href="/admin.html">管理员登录</a></div>
  </div>
  <div class="container">
    <div class="toast-wrap" id="toastWrap"></div>
    <div class="card">
      <h2>登录</h2>
      <label>学号<input id="sNum" value="20250001"></label>
      <label>身份证后六位<input id="sPwd" value="011234"></label>
      <button class="btn" id="loginBtn">登录</button>
      <div class="muted">登录成功后将跳转到功能页面</div>
    </div>
  </div>
  <script>
    const api=p=>p
    const j=async r=>{if(!r.ok)throw new Error(await r.text());return r.json()}
    const b=()=>document.getElementById.bind(document)
    const showToast=(msg)=>{const w=b()("toastWrap");const d=document.createElement("div");d.className="toast error";d.textContent=msg;w.appendChild(d);setTimeout(()=>{d.style.opacity="0";d.style.transition="opacity .3s";setTimeout(()=>{w.removeChild(d)},300)},2500)}
    b()("loginBtn").onclick=async()=>{
      try{
        const body=new URLSearchParams()
        body.set("studentNumber",b()("sNum").value)
        body.set("idLastSix",b()("sPwd").value)
        const r=await j(await fetch(api("/api/student/login"),{method:"POST",body}))
        localStorage.setItem("studentToken", r.token||"")
        localStorage.setItem("studentName", r.name||"")
        location.href="/student.html"
      }catch(e){
        showToast("登录失败")
      }
    }
  </script>
</body>
</html>
